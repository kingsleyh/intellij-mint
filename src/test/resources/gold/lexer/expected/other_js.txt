module ('module')
WHITE_SPACE (' ')
IDENT ('Js')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n\n  ')
fun ('fun')
WHITE_SPACE (' ')
IDENT ('generateNewWallet')
WHITE_SPACE (' ')
( ('(')
IDENT ('networkPrefix')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('String')
) (')')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('Result')
( ('(')
IDENT ('Wallet')
. ('.')
IDENT ('Error')
, (',')
WHITE_SPACE (' ')
IDENT ('Wallet')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n      ')
( ('(')
( ('(')
) (')')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
try ('try')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
if ('if')
WHITE_SPACE (' ')
( ('(')
[ ('[')
STRING_LITERAL ('"T0"')
, (',')
WHITE_SPACE (' ')
STRING_LITERAL ('"M0"')
] (']')
. ('.')
IDENT ('indexOf')
( ('(')
IDENT ('networkPrefix')
) (')')
WHITE_SPACE (' ')
== ('==')
= ('=')
WHITE_SPACE (' ')
NUMBER_LITERAL ('-1')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Err')
( ('(')
$ ('$')
IDENT ('Wallet_Error_InvalidNetwork')
) (')')
WHITE_SPACE ('\n          ')
} ('}')
WHITE_SPACE ('\n\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('keyPair')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('generateValidKeyPair')
( ('(')
) (')')
; (';')
WHITE_SPACE ('\n\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('wallet')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
IDENT ('publicKey')
: (':')
WHITE_SPACE (' ')
IDENT ('keyPair')
. ('.')
IDENT ('hexPublicKey')
, (',')
WHITE_SPACE ('\n            ')
IDENT ('wif')
: (':')
WHITE_SPACE (' ')
IDENT ('makeWif')
( ('(')
IDENT ('keyPair')
. ('.')
IDENT ('hexPrivateKey')
, (',')
WHITE_SPACE (' ')
IDENT ('networkPrefix')
) (')')
, (',')
WHITE_SPACE ('\n            ')
IDENT ('address')
: (':')
WHITE_SPACE (' ')
IDENT ('makeAddress')
( ('(')
IDENT ('keyPair')
. ('.')
IDENT ('hexPublicKey')
, (',')
WHITE_SPACE (' ')
IDENT ('networkPrefix')
) (')')
WHITE_SPACE ('\n          ')
} ('}')
WHITE_SPACE ('\n\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Ok')
( ('(')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Record')
( ('(')
IDENT ('wallet')
) (')')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE (' ')
catch ('catch')
WHITE_SPACE (' ')
( ('(')
IDENT ('e')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Err')
( ('(')
$ ('$')
IDENT ('Wallet_Error_WalletGenerationError')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n      ')
} ('}')
) (')')
( ('(')
) (')')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n    ')
fun ('fun')
WHITE_SPACE (' ')
IDENT ('encryptWallet')
WHITE_SPACE (' ')
( ('(')
IDENT ('wallet')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('Wallet')
, (',')
WHITE_SPACE (' ')
IDENT ('password')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('String')
) (')')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('Result')
( ('(')
IDENT ('Wallet')
. ('.')
IDENT ('Error')
, (',')
WHITE_SPACE (' ')
IDENT ('EncryptedWallet')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n      ')
( ('(')
( ('(')
) (')')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
try ('try')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('address')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('wallet')
. ('.')
IDENT ('address')
; (';')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('salt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('all_crypto')
. ('.')
IDENT ('bcrypt')
. ('.')
IDENT ('genSaltSync')
( ('(')
NUMBER_LITERAL ('10')
) (')')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('hash')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('all_crypto')
. ('.')
IDENT ('bcrypt')
. ('.')
IDENT ('hashSync')
( ('(')
IDENT ('password')
, (',')
WHITE_SPACE (' ')
IDENT ('salt')
) (')')
WHITE_SPACE ('\n\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('walletJson')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('JSON')
. ('.')
IDENT ('stringify')
( ('(')
IDENT ('wallet')
) (')')
; (';')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('bf')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('all_crypto')
. ('.')
IDENT ('blowfish')
( ('(')
IDENT ('reverseString')
( ('(')
IDENT ('hash')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('ciphertext')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('ab2hexstring')
( ('(')
IDENT ('bf')
. ('.')
encode ('encode')
( ('(')
IDENT ('walletJson')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('encryptedWallet')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                 ')
IDENT ('source')
: (':')
WHITE_SPACE (' ')
STRING_LITERAL ('"kajiki"')
, (',')
WHITE_SPACE ('\n                 ')
IDENT ('ciphertext')
: (':')
WHITE_SPACE (' ')
IDENT ('ciphertext')
, (',')
WHITE_SPACE ('\n                 ')
IDENT ('address')
: (':')
WHITE_SPACE (' ')
IDENT ('address')
, (',')
WHITE_SPACE ('\n                 ')
IDENT ('salt')
: (':')
WHITE_SPACE (' ')
IDENT ('salt')
WHITE_SPACE ('\n          ')
} ('}')
; (';')
WHITE_SPACE ('\n\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Ok')
( ('(')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Record')
( ('(')
IDENT ('encryptedWallet')
) (')')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE (' ')
catch ('catch')
WHITE_SPACE (' ')
( ('(')
IDENT ('e')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Err')
( ('(')
$ ('$')
IDENT ('Wallet_Error_EncryptWalletError')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n      ')
} ('}')
) (')')
( ('(')
) (')')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n    ')
fun ('fun')
WHITE_SPACE (' ')
IDENT ('decryptWallet')
WHITE_SPACE (' ')
( ('(')
IDENT ('encryptedWallet')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('EncryptedWallet')
, (',')
WHITE_SPACE (' ')
IDENT ('password')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('String')
) (')')
WHITE_SPACE (' ')
: (':')
WHITE_SPACE (' ')
IDENT ('Result')
( ('(')
IDENT ('Wallet')
. ('.')
IDENT ('Error')
, (',')
WHITE_SPACE (' ')
IDENT ('Wallet')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n      ')
( ('(')
( ('(')
) (')')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
try ('try')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('hash')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('all_crypto')
. ('.')
IDENT ('bcrypt')
. ('.')
IDENT ('hashSync')
( ('(')
IDENT ('password')
, (',')
WHITE_SPACE (' ')
IDENT ('encryptedWallet')
. ('.')
IDENT ('salt')
) (')')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('bf')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('all_crypto')
. ('.')
IDENT ('blowfish')
( ('(')
IDENT ('reverseString')
( ('(')
IDENT ('hash')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('binaryCipherText')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Uint8Array')
( ('(')
IDENT ('hexstring2ab')
( ('(')
IDENT ('encryptedWallet')
. ('.')
IDENT ('ciphertext')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n          ')
IDENT ('var')
WHITE_SPACE (' ')
IDENT ('wallet')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
IDENT ('JSON')
. ('.')
IDENT ('parse')
( ('(')
IDENT ('bf')
. ('.')
decode ('decode')
( ('(')
IDENT ('binaryCipherText')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Ok')
( ('(')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Record')
( ('(')
IDENT ('wallet')
) (')')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE (' ')
catch ('catch')
WHITE_SPACE (' ')
( ('(')
IDENT ('e')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n          ')
IDENT ('return')
WHITE_SPACE (' ')
IDENT ('new')
WHITE_SPACE (' ')
IDENT ('Err')
( ('(')
$ ('$')
IDENT ('Wallet_Error_DecryptWalletError')
) (')')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n      ')
} ('}')
) (')')
( ('(')
) (')')
WHITE_SPACE ('\n      ')
BAD_CHARACTER ('`')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n\n')
} ('}')